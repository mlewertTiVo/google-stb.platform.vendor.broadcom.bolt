# ***************************************************************************
# Broadcom Proprietary and Confidential. (c)2018 Broadcom. All rights reserved.
#
# THIS SOFTWARE MAY ONLY BE USED SUBJECT TO AN EXECUTED SOFTWARE LICENSE
# AGREEMENT  BETWEEN THE USER AND BROADCOM.  YOU HAVE NO RIGHT TO USE OR
# EXPLOIT THIS MATERIAL EXCEPT SUBJECT TO THE TERMS OF SUCH AN AGREEMENT.
#
# ***************************************************************************

[version 1.37]

include config/flashmaps.cfg
include config/stdbuild.cfg

config HARDWARE_SHA off
config MEMDMA_MCPB off
config MON64 on
config TRUSTZONE_CMD on
config USB_BDC on
config ZEUS4_2 on
config ZEUS4_2_1 on
config ZEUS_VERSION 0x421
config SSBM on

[family 7255a0]

include config/A53.cfg
include config/bsp_config.cfg
gset CONFIG_BRCM_GENET_VERSION 5
include config/layout-zeus421-mon64.cfg

gset BCHP_CHIP 7255
gset BCHP_REV a0
gset MEMC_REV B230_G01
gset MEMC_ALT B230_G01_DDR4

# board ID via BSC_M3 or BSC_M2
i2cbus BSCD BSCC

cmdlevel 3

dts config/family-7255a0.dts
include config/A53-peripherals.cfg

# mapping between MEMC & CPU in the ascending order of MEMC and offset in MEMC
mmap 0 0x00000000 0x0000000000 0xC0000000 # [0gb..3gb)@MEMC0 -> [0gb..3gb)
mmap 0 0xC0000000 0x0100000000 0x40000000 # [3gb..4gb)@MEMC0 -> [4gb..5gb)

rtsconfig -id 0 -file config/family-7255a0-box0.rts
rtsdefault -id 1

rtsbase 0 MEMC_ARB_0_CLIENT_INFO_0

# PINMUX for console UART
pmux -pin gpio_040,gpio_041 -sel uart_ -n 2
# board ID at BSC_M2 and BSC_M3
pmux -pin aon_sgpio_02:aon_sgpio_05 -sel bsc_m -n 4

avs enable -domains 1 -mode dfs -pmap 0 -pstate 0
dt autogen -node avs_cpu

# BSC_M3 for INA219 on BCM972554PCK
dt autogen -node bsc -choose 3
dtsinclude -file config/7255a0/bcm972554pck-v00.dts

# nand boot shapes
nandshape 0b11000 0b00000
nandshape 0b11000 0b01000
nandshape 0b11000 0b10000

# list of possible nand chips (for all boards)
include config/nandchips.cfg

# flash map selection
mapselect STB_BP3

# Auto generate device nodes in the device tree
include config/A53-stddevices.cfg
dt autogen -node serial -compatible brcm,bcm7260-uart brcm,bcm7271-uart ns16550a -stdout A

sdio -controller 0 -type nodevice
sdio -controller 1 -type nodevice

[chip 72550a0]
# 16bit DDR PHY, 1080p60
avs enable -domains 1 -mode dfs -pmap 0 -pstate 0

enet -genet 0 -phy_type INT -mdio_mode 1 -phy_speed 100 -phy_id 1 # built-in
rtsdefault -id 2

[chip 72553a0]
# 32bit DDR PHY, FHD, TSIO, DVB-CI+
avs enable -domains 1 -mode dfs -pmap 3 -pstate 0

enet -genet 0 -phy_type INT -mdio_mode 1 -phy_speed 100 -phy_id 1 # built-in
rtsdefault -id 3

[chip 72554a0]
# 4Kp30(60), and 72553
avs enable -domains 1 -mode dfs -pmap 4 -pstate 0

enet -genet 0 -phy_type INT -mdio_mode 1 -phy_speed 100 -phy_id 1 # built-in
rtsdefault -id 4

[chip 72528a0]
# 72554a0 without VP9
avs enable -domains 1 -mode dfs -pmap 4 -pstate 0

enet -genet 0 -phy_type INT -mdio_mode 1 -phy_speed 100 -phy_id 1 # built-in
rtsdefault -id 4

[board BCM972550SV : chip.72550a0]
comment Silicon Verification
bid 0x10 # BCM972550SV_V00_REV02

memsys alt
ddr -n 0 -size_mb 1024 -base_mb 0 -clk 1200MHz -size_bits 4G -width 8 -phy 16 -custom ddr4

vreg -name wifi_pwr -gpio upg_gio_aon -pin 14 -active hi # before used by pcie
pcie -controller 0 -type nominal -bus 1 -slot 0 -mac 1 -pwr wifi_pwr

# gpio_000~012 strap, NA
pmux -pin gpio_013,gpio_014 -sel uart_ -n 2 # UART#1
# gpio_015~020 incomplete/conflicting function
pmux -pin gpio_021:gpio_034 -sel enet0_rgmii_ -n 14
pmux -pin gpio_035 -sel enet0_link_alt
pmux -pin gpio_036 -sel enet0_activity_alt
# gpio_037 incomplete
pmux -pin gpio_038,gpio_039 -sel uart_ -n 2 # UART#2
# gpio_040~041 family common console

# aon_gpio_00~02 TP, strap
pmux -pin aon_gpio_03 -sel led_kd_0
pmux -pin aon_gpio_04:aon_gpio_06 -sel i2s_ -n 3
pmux -pin aon_gpio_07:aon_gpio_11 -sel led_ls_ -n 5
# aon_gpio_12 gpio
pmux -pin aon_gpio_13 -sel led_ld_1
# aon_gpio_14 gpio
pmux -pin aon_gpio_15 -sel pwm2
pmux -pin aon_gpio_16:aon_gpio_19 -sel led_ld_ -n 4
pmux -pin aon_gpio_20 -sel led_out
pmux -pin aon_sgpio_00,aon_sgpio_01 -sel hdmi_tx0_bsc_ -n 2
pmux -pin aon_sgpio_02,aon_sgpio_03 -sel aon_sgpio_ -n 2 # override family common BSC
# aon_sgpio_04~05 family common BSC for BID

[board BCM972550USFF : chip.72550a0]
comment Ultra Small Form Factor
bid 0x32 # from BCM97260USFF_V00

memsys alt
ddr -n 0 -size_mb 2048 -base_mb 0 -clk 1200MHz -size_bits 8G -width 8 -phy 16 -custom ddr4

vreg -name wifi_pwr -gpio upg_gio_aon -pin 15 -active hi # before used by pcie
vreg -name wifi_reg -gpio upg_gio_aon -pin 16 -active hi # before used by pcie
pcie -controller 0 -type nominal -bus 1 -slot 0 -mac 1 -pwr wifi_pwr,wifi_reg
sdio -controller 0 -type sd
sdio -controller 1 -type emmc

# gpio_000~012 strap, NC
pmux -pin gpio_013,gpio_014 -sel uart_ -n 2
# gpio_015~020 NC, gpio
pmux -pin gpio_021 -sel sd_card0_0_cmd -pull up
pmux -pin gpio_022 -sel sd_card0_0_clk
pmux -pin gpio_023:gpio_026 -sel sd_card0_0_dat -n 4 -pull up
# gpio_027 gpio
pmux -pin gpio_028 -sel sd_card0_0_pres -pull up
# gpio_029~032 NC, gpio
pmux -pin gpio_033 -sel sd_card0_0_led
# gpio_034 NC
pmux -pin gpio_035 -sel sd_card0_0_pwr0 -pull up
# gpio_036~037 strap, NC
pmux -pin gpio_038 -sel enet0_link
pmux -pin gpio_039 -sel enet0_activity
# gpio_040~041 family common console

# aon_gpio_00~19 strap, gpio, NC
pmux -pin aon_gpio_20 -sel led_out
# aon_gpio_21~27 NC, strap
pmux -pin aon_sgpio_00,aon_sgpio_01 -sel hdmi_tx0_bsc_ -n 2
pmux -pin aon_sgpio_02,aon_sgpio_03 -sel aon_sgpio_ -n 2 # override family common BSC
# aon_sgpio_04~05 family common BSC for BID

[board BCM972550_2LD3 : chip.72550a0]
comment 2 Layer with DDR3
bid 0xC2 # from BCM972550_2LD3_V00_REV02

memsys std
ddr -n 0 -size_mb 512 -base_mb 0 -clk 933MHz -size_bits 4G -width 16 -phy 16

# gpio_000~012 strap, NA
pmux -pin gpio_013:gpio_017 -sel sc0_ -n 5
# gpio_018~019 skip SC0_AUX1 and SC0_AUX2, NDS driver to configure if needed
pmux -pin gpio_020 -sel sc0_vpp
# gpio_021~024 NC
pmux -pin gpio_025 -sel ds_agci_ctl
# gpio_026~034 NC
pmux -pin gpio_035:gpio_037 -sel i2s_ -n 3
# gpio_038~039 NC
# gpio_040~041 family common console

# aon_gpio_00~11 strap, NC
pmux -pin aon_gpio_12,aon_gpio_13 -sel uart_ -n 2 # UART#1
# aon_gpio_14~15 NC
pmux -pin aon_gpio_16 -sel enet0_link_alt5
# aon_gpio_17 NC
pmux -pin aon_gpio_18 -sel enet0_activity_alt5
pmux -pin aon_gpio_19 -sel aud_fs_clk0
pmux -pin aon_gpio_20 -sel led_out
# aon_gpio_21~27 NA, NC
pmux -pin aon_sgpio_00,aon_sgpio_01 -sel hdmi_tx0_bsc_ -n 2
# aon_sgpio_02~03 family common BSC for BID
pmux -pin aon_sgpio_04,aon_sgpio_05 -sel aon_sgpio_ -n 2 # override family common BSC

[board BCM972550_2LD4 : chip.72550a0]
comment 2 Layer with DDR4
bid 0xC3 # from BCM972550_2LD4_V00_REV02

memsys alt
ddr -n 0 -size_mb 1024 -base_mb 0 -clk 933MHz -size_bits 8G -width 16 -phy 16 -custom ddr4

# gpio_000~012 strap, NA
pmux -pin gpio_013:gpio_017 -sel sc0_ -n 5
# gpio_018~019 skip SC0_AUX1 and SC0_AUX2, NDS driver to configure if needed
pmux -pin gpio_020 -sel sc0_vpp
pmux -pin gpio_021:gpio_024 -sel mtsif0_ -n 4
# gpio_025 gpio
pmux -pin gpio_026:gpio_031 -sel mtsif0_data -n 6
# gpio_032 NC
pmux -pin gpio_033,gpio_034 -sel mtsif_ats_ -n 2
# gpio_035~037 NC
pmux -pin gpio_038 -sel enet0_link
pmux -pin gpio_039 -sel enet0_activity
# gpio_040~041 family common console

# aon_gpio_00~11 strap, NC
pmux -pin aon_gpio_12,aon_gpio_13 -sel uart_ -n 2 # UART#1
# aon_gpio_14~15 NC
pmux -pin aon_gpio_16:aon_gpio_18 -sel i2s_ -n 3
pmux -pin aon_gpio_19 -sel aud_fs_clk0
pmux -pin aon_gpio_20 -sel led_out
# aon_gpio_21~27 NA, NC
pmux -pin aon_sgpio_00,aon_sgpio_01 -sel hdmi_tx0_bsc_ -n 2
# aon_sgpio_02~03 family common BSC for BID
pmux -pin aon_sgpio_04,aon_sgpio_05 -sel aon_sgpio_ -n 2 # override family common BSC

[board BCM972553SV : chip.72553a0]
comment Silicon Verification
include config/7255a0/bcm972554sv-v00.cfg

[board BCM972554SV : chip.72554a0]
comment Silicon Verification
include config/7255a0/bcm972554sv-v00.cfg

[board BCM972528SV : chip.72528a0]
comment Silicon Verification
include config/7255a0/bcm972554sv-v00.cfg

[board BCM972553DV : chip.72553a0]
comment Digital Verification
include config/7260a0/bcm972604dv-v00.cfg

[board BCM972554DV : chip.72554a0]
comment Digital Verification
include config/7260a0/bcm972604dv-v00.cfg

[board BCM972528DV : chip.72528a0]
comment Digital Verification
include config/7260a0/bcm972604dv-v00.cfg

[board BCM972554_4L : chip.72554a0]
comment 4Layer of USFF
include config/7255a0/bcm972554_4l-v00.cfg
pmux -pin aon_sgpio_02,aon_sgpio_03 -sel aon_sgpio_ -n 2 # override family common BSC

[board BCM972554DR3_6L : chip.72554a0]
comment DDR3 6Layer of USFF
include config/7255a0/bcm972554dr3_6l-v00.cfg
pmux -pin aon_sgpio_02,aon_sgpio_03 -sel aon_sgpio_ -n 2 # override family common BSC

[board BCM972554PCK_V00 : chip.72554a0]
comment Puck
include config/7255a0/bcm972554pck-v00.cfg
pmux -pin aon_sgpio_02,aon_sgpio_03 -sel aon_sgpio_ -n 2 # override family common BSC

# Enable BSC_M3 for INA219 PMIC
dt cull -root /rdb -node i2c@f0417b80 -prop status

[board BCM972554PCK : chip.72554a0]
comment Puck
include config/7255a0/bcm972554pck-v10.cfg

# Enable BSC_M3 for INA219 PMIC
dt cull -root /rdb -node i2c@f0417b80 -prop status

[board BCM972554HB : chip.72554a0]
comment Hybrid
bid 0x62 # from BCM972554HB_V00_REV02

memsys alt
ddr -n 0 -size_mb 2048 -base_mb 0 -clk 1200MHz -size_bits 8G -width 16 -phy 32 -custom ddr4

vreg -name wifi_reg -gpio upg_gio_aon -pin 4 -active hi # before used by pcie
vreg -name wifi_pwr -gpio upg_gio_aon -pin 21 -active hi # before used by pcie
pcie -controller 0 -type nominal -bus 1 -slot 0 -mac 1 -pwr wifi_reg,wifi_pwr
sdio -controller 0 -type sd -uhs 1
usb -controller 0 -type nominal -bdc dual # enable DRD mode

# gpio_000 strap
pmux -pin gpio_001:gpio_004 -sel mtsif0_ -n 4
# gpio_005 NC
pmux -pin gpio_006:gpio_011 -sel mtsif0_ -n 6
# gpio_012 gpio
pmux -pin gpio_013:gpio_017 -sel sc0_ -n 5
# gpio_018~019 skip SC0_AUX1 and SC0_AUX2, NDS driver to configure if needed
pmux -pin gpio_020 -sel sc0_vpp
pmux -pin gpio_021 -sel sd_card0_0_cmd -pull up
pmux -pin gpio_022 -sel sd_card0_0_clk
pmux -pin gpio_023:gpio_026 -sel sd_card0_0_dat -n 4 -pull up
# gpio_027 NC
pmux -pin gpio_028 -sel sd_card0_0_pres -pull up
pmux -pin gpio_029 -sel sd_card0_0_wprot -pull down # uSD, NO pin for WP
# gpio_030~032 NC
pmux -pin gpio_033,gpio_034 -sel mtsif_ats_ -n 2
pmux -pin gpio_035,gpio_036 -sel sd_card0_0_ -pull up -n 2
# gpio_038~039 NC
# gpio_040~041 family common console
# gpio_042~082 gpio, NC

pmux -pin aon_gpio_00 -sel spi_m_ss2b
pmux -pin aon_gpio_01 -sel enet0_link_alt3
pmux -pin aon_gpio_02 -sel enet0_activity_alt4
# aon_gpio_03~11 gpio, strap, NC
pmux -pin aon_gpio_12,aon_gpio_13 -sel uart_ -n 2 # UART#1
# aon_gpio_14~15 gpio
pmux -pin aon_gpio_16 -sel spi_m_sck
pmux -pin aon_gpio_17:aon_gpio_19 -sel spi_m_ -n 3
pmux -pin aon_gpio_20 -sel led_out
# aon_gpio_21~27 gpio, NC, strap
pmux -pin aon_sgpio_00,aon_sgpio_01 -sel hdmi_tx0_bsc_ -n 2
pmux -pin aon_sgpio_02,aon_sgpio_03 -sel aon_sgpio_ -n 2 # override family common BSC
# aon_sgpio_04~05 family common BSC for BID

[board BCM972554RMT : board.BCM972554HB]
comment Rafael Micro Tuner
bid 0x63 # from BCM972554RMT_V00_REV01

pmux -pin gpio_032 -sel ds_agci_ctl

[end]
