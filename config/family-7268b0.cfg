# ***************************************************************************
# Broadcom Proprietary and Confidential. (c)2016 Broadcom. All rights reserved.
#
# THIS SOFTWARE MAY ONLY BE USED SUBJECT TO AN EXECUTED SOFTWARE LICENSE
# AGREEMENT  BETWEEN THE USER AND BROADCOM.  YOU HAVE NO RIGHT TO USE OR
# EXPLOIT THIS MATERIAL EXCEPT SUBJECT TO THE TERMS OF SUCH AN AGREEMENT.
#
# ***************************************************************************

[version 1.37]

include config/flashmaps.cfg
include config/stdbuild.cfg
config MEMDMA_MCPB off
config USB_BDC on
config ZEUS4_2 on
config ZEUS4_2_1 on

#TODO
config SPLASH off

# ARM TrustZone support, see doc/trustzone.txt for more info
config TRUSTZONE_CMD on
config TRUSTZONE_MON on

[family 7268b0]

include config/A53.cfg
include config/bsp_config.cfg
gset CONFIG_BRCM_GENET_VERSION	5
include config/layout-zeus42-stub.cfg

gset BCHP_CHIP 7268
gset BCHP_REV  b0
gset MEMC_REV B220_H00

# board ID via BSC_M3
i2cbus BSCD

cmdlevel 3

dts config/family-7268b0.dts
include config/A53-peripherals.cfg

# mapping between MEMC & CPU in the ascending order of MEMC and offset in MEMC
mmap 0 0x00000000 0x0000000000 0xC0000000 # [0gb..3gb)@MEMC0 -> [0gb..3gb)
mmap 0 0xC0000000 0x0100000000 0x40000000 # [3gb..4gb)@MEMC0 -> [4gb..5gb)

rtsconfig -id 0 -file config/family-7268a0-box0.rts
rtsdefault -id 1

rtsbase 0 MEMC_ARB_0_CLIENT_INFO_0

# PINMUX for console UART
pmux -pin gpio_040,gpio_041 -sel uart_ -n 2
# board ID at BSC_M3
pmux -pin aon_sgpio_04,aon_sgpio_05 -sel bsc_m3_ -n 2

avs enable -domains 2 -mode dvfs -pmap 2 -pstate 0
dt autogen -node avs_cpu

# nand boot shapes
nandshape 0b11000 0b00000
nandshape 0b11000 0b01000
nandshape 0b11000 0b10000

# list of possible nand chips (for all boards)
include config/nandchips.cfg

# flash map selection
mapselect STB

# Auto generate device nodes in the device tree
include config/A53-stddevices.cfg

sdio -controller 0 -type nodevice
sdio -controller 1 -type nodevice

[chip 7268b0]
# 2GB from one DRAM part, but two 8G x16 dies inside
ddr -n 0 -size_mb 2048 -base_mb 0 -clk 1867MHz -size_bits 8G -width 16 -phy 32

enet -genet 0 -phy_type INT -mdio_mode 1 -phy_speed 100 -phy_id 1 # built-in
enet -genet 1 -phy_type - -phy_speed - -phy_id -

[board BCM97268SV : chip.7268b0]
comment Silicon Verification
bid 0x11 # BCM97268SV_V00_REV06

pcie -controller 0 -type nominal -bus 1 -slot 0 -mac 1
sdio -controller 1 -type emmc # J2108

# gpio_000 strap
pmux -pin gpio_001:gpio_009 -sel mtsif1_ -n 9
# gpio_010 NC
pmux -pin gpio_011 -sel mtsif1_data7
# gpio_012~016 incomplete, NC
pmux -pin gpio_017 -sel aud_fs_clk0
pmux -pin gpio_018 -sel i2s_clk0_out
pmux -pin gpio_019 -sel i2s_data0_out
pmux -pin gpio_020 -sel i2s_lr0_out
pmux -pin gpio_021:gpio_024 -sel mtsif0_ -n 4
# gpio_025 incomplete
pmux -pin gpio_026:gpio_031 -sel mtsif0_data -n 6
# gpio_032 incomplete
pmux -pin gpio_033,gpio_034 -sel mtsif_ats_ -n 2
# gpio_035~037 incomplete, strap
pmux -pin gpio_038 -sel enet0_link
pmux -pin gpio_039 -sel enet0_activity
# gpio_040~041 family common console
# gpio_042~045 NC, gpio
pmux -pin gpio_046:gpio_053 -sel sfe_data_0 -n 8
# gpio_054 NC
pmux -pin gpio_055:gpio_060 -sel sfe_ -n 6 # clock, AGC
pmux -pin gpio_061:gpio_068 -sel sfe_data_ -n 8
# gpio_069~073 NC
pmux -pin gpio_074:gpio_081 -sel sfe_data_ -n 8
# gpio_082 NC

# aon_gpio_00~05 gpio, strap
pmux -pin aon_gpio_06 -sel led_kd_3
# aon_gpio_07 gpio
pmux -pin aon_gpio_08,aon_gpio_09 -sel spi_m_ss -n 2
pmux -pin aon_gpio_10,aon_gpio_11 -sel led_ls_ -n 2
pmux -pin aon_gpio_12:aon_gpio_15 -sel led_ld_ -n 4
pmux -pin aon_gpio_16:aon_gpio_19 -sel mpm_sf_ -n 4
pmux -pin aon_gpio_20 -sel led_out
pmux -pin aon_gpio_21:aon_gpio_24 -sel spi_m_ -n 4
pmux -pin aon_gpio_25,aon_gpio_26 -sel bsc_m1_ -n 2
# aon_gpio_27 strap

pmux -pin aon_sgpio_00:aon_sgpio_03 -sel hdmi_ -n 4 # Tx0 and Rx
# aon_sgpio_04~05 family common BSC for BID

[board BCM97268USFF : chip.7268b0]
comment IP-Only
bid 0x25 # BCM97268USFF_V00_REV09

enet -genet 0 -phy_type - -phy_speed - -phy_id - # NO built-in ethernet
vreg -name wifi -gpio upg_gio_aon -pin 21 -active hi # before used by pcie
vreg -name wlan -gpio upg_gio_aon -pin 26 -active hi # before used by pcie
pcie -controller 0 -type nominal -bus 1 -slot 0 -mac 1 -pwr wifi,wlan
sdio -controller 0 -type sd -uhs 0 # 3.3V only, no UHS

# gpio_000~020 strap, NC
pmux -pin gpio_021:gpio_026 -sel sd_card0_0_ -pull up -n 6
# gpio_027 NC
pmux -pin gpio_028 -sel sd_card0_0_pres -pull up
pmux -pin gpio_029 -sel sd_card0_0_wprot -pull down # uSD, NO pin for WP
# gpio_030~034 NC
pmux -pin gpio_035,gpio_036 -sel sd_card0_0_ -pull up -n 2
# gpio_037 NC
pmux -pin gpio_038,gpio_039 -sel uart_ -n 2 # UART#2
# gpio_040~041 family common console
# gpio_042~082 NC, gpio

# aon_gpio_00~09 gpio, strap
pmux -pin aon_gpio_10,aon_gpio_11 -sel mpm_uart_ -n 2
pmux -pin aon_gpio_12:aon_gpio_15 -sel uart_ -n 4 # UART#1 for BT
pmux -pin aon_gpio_16:aon_gpio_19 -sel spi_m_ -n 4 # MPM flash
pmux -pin aon_gpio_20 -sel led_out
pmux -pin aon_gpio_21 -sel aon_gpio_21 -pull up # exteranl pull-up may not exist
# aon_gpio_22~27 strap, gpio
pmux -pin aon_sgpio_00:aon_sgpio_03 -sel hdmi_ -n 4 # Tx0 and Rx
# aon_sgpio_04~05 family common BSC for BID

[board BCM97268USFF4L : chip.7268b0]
comment Puck - Ultra Small Form Factor
bid 0x26 # BCM97268USFF4L_V00_REV05

vreg -name wifi -gpio upg_gio_aon -pin 21 -active hi # before used by pcie
vreg -name wlan -gpio upg_gio_aon -pin 26 -active hi # before used by pcie
pcie -controller 0 -type nominal -bus 1 -slot 0 -mac 1 -pwr wifi,wlan
sdio -controller 0 -type sd -uhs 0 # 3.3V only, no UHS

# gpio_000~020 strap, NC
pmux -pin gpio_021:gpio_026 -sel sd_card0_0_ -pull up -n 6
# gpio_027 NC
pmux -pin gpio_028 -sel sd_card0_0_pres -pull up
pmux -pin gpio_029 -sel sd_card0_0_wprot -pull down # uSD, NO pin for WP
# gpio_030~034 NC
pmux -pin gpio_035,gpio_036 -sel sd_card0_0_ -pull up -n 2
# gpio_037 NC
pmux -pin gpio_038 -sel enet0_link
pmux -pin gpio_039 -sel enet0_activity
# gpio_040~041 family common console
# gpio_042~082 NC, gpio

# aon_gpio_00~11 gpio, strap
pmux -pin aon_gpio_12:aon_gpio_15 -sel uart_ -n 4 # UART#1 for BT
# aon_gpio_16~19 NC, strap
pmux -pin aon_gpio_20 -sel led_out
# aon_gpio_21~27 gpio, strap
pmux -pin aon_sgpio_00:aon_sgpio_03 -sel hdmi_ -n 4 # Tx0 and Rx
# aon_sgpio_04~05 family common BSC for BID

[board BCM97268USFFA4L : board.BCM97268USFF4L]
comment Puck for Android
bid 0x27 # BCM97268USFFA4L_V00_REV05

sdio -controller 1 -type emmc # U202
usb -controller 0 -type nominal -bdc on # enable USB device mode

[board BCM97268LC6L : chip.7268b0]
comment Low Cost 6-Layer
bid 0x24 # BCM97268LC6L_V00_REV02

vreg -name wifi -gpio upg_gio_aon -pin 21 -active hi # before used by pcie
vreg -name wlan -gpio upg_gio_aon -pin 26 -active hi # before used by pcie
pcie -controller 0 -type nominal -bus 1 -slot 0 -mac 1 -pwr wifi,wlan
sdio -controller 0 -type sd -uhs 0 # 3.3V only, no UHS

# gpio_000~020 strap, NC
pmux -pin gpio_021:gpio_026 -sel sd_card0_0_ -pull up -n 6
# gpio_027 NC
pmux -pin gpio_028 -sel sd_card0_0_pres -pull up
pmux -pin gpio_029 -sel sd_card0_0_wprot -pull down # uSD, NO pin for WP
# gpio_030~034 NC
pmux -pin gpio_035,gpio_036 -sel sd_card0_0_ -pull up -n 2
# gpio_037 NC
pmux -pin gpio_038 -sel enet0_link
pmux -pin gpio_039 -sel enet0_activity
# gpio_040~041 family common console
# gpio_042~082 NC, gpio

# aon_gpio_00~19 strap, gpio, NC
pmux -pin aon_gpio_20 -sel led_out
# aon_gpio_21~27 gpio, strap
pmux -pin aon_sgpio_00:aon_sgpio_03 -sel hdmi_ -n 4 # Tx0 and Rx
# aon_sgpio_04~05 family common BSC for BID

[board BCM97268DV : chip.7268b0]
comment Digital Verification
bid 0x31 # BCM97268DV_V00_REV06

sdio -controller 0 -type sd -uhs 0 # 3.3V only, no UHS

# gpio_000 gpio
pmux -pin gpio_001:gpio_005 -sel sc1_ -n 5
# gpio_006 NC
# gpio_007 skip SC1_AUX2, NDS driver to configure if needed
pmux -pin gpio_008 -sel sc1_vpp
# gpio_009 gpio
pmux -pin gpio_010:gpio_012 -sel pkt_ -n 3
pmux -pin gpio_013:gpio_017 -sel sc0_ -n 5
# gpio_018~019 skip SC0_AUX1/AUX2, NDS driver to configure if needed
pmux -pin gpio_020 -sel sc0_vpp
pmux -pin gpio_021:gpio_024 -sel mtsif0_ -n 4
# gpio_025 incomplete
pmux -pin gpio_026:gpio_031 -sel mtsif0_data -n 6
# gpio_032 incomplete
pmux -pin gpio_033,gpio_034 -sel mtsif_ats_ -n 2
pmux -pin gpio_035 -sel enet0_link_alt # should be specific due to similar names
pmux -pin gpio_036 -sel enet0_activity_alt # should be specific
# gpio_037~039 gpio, incomplete
# gpio_040~041 family common console
pmux -pin gpio_042:gpio_054 -sel pod2chip_ -n 13
pmux -pin gpio_055:gpio_069 -sel chip2pod_ -n 15
pmux -pin gpio_070 -sel ebi_rwb
pmux -pin gpio_071 -sel ebi_cs3b
pmux -pin gpio_072,gpio_073 -sel ebi_ -n 2
pmux -pin gpio_074:gpio_082 -sel ebi_addr_ -n 9
# sgpio_00~01 family common BSC for BID

# aon_gpio_00~02 gpio, strap
pmux -pin aon_gpio_03:aon_gpio_09 -sel sd_card0_1_ -pull up -n 7
# aon_gpio_10 strap
pmux -pin aon_gpio_11 -sel sd_card0_1_cmd -pull up
pmux -pin aon_gpio_12,aon_gpio_13 -sel uart_ -n 2 # UART#1
pmux -pin aon_gpio_14,aon_gpio_15 -sel sd_card0_1_ -pull up -n 2
pmux -pin aon_gpio_16,aon_gpio_17 -sel uart_ -n 2 # UART#2
# aon_gpio_18~19 gpio
pmux -pin aon_gpio_20 -sel led_out
pmux -pin aon_gpio_21:aon_gpio_24 -sel spi_m_ -n 4
# aon_gpio_25~27 NC, gpio
pmux -pin aon_sgpio_00:aon_sgpio_03 -sel hdmi_ -n 4 # Tx0 and Rx
pmux -pin aon_sgpio_04,aon_sgpio_05 -sel bsc_m3_ -n 2

[board BCM97268HB : chip.7268b0]
comment Hybrid
bid 0x42 # BCM97268HB_V00_REV08, BCM97268HBC/D_V00_REV07, BCM97268HBT_V00_REV08

vreg -name wlan -gpio upg_gio_aon -pin 26 -active hi # before used by pcie
pcie -controller 0 -type nominal -bus 1 -slot 0 -mac 1 -pwr wlan
sdio -controller 0 -type sd -uhs 0 # 3.3V only, no UHS

# gpio_000 strap
pmux -pin gpio_001:gpio_009 -sel mtsif1_ -n 9
# gpio_010 NC
pmux -pin gpio_011 -sel mtsif1_data7
# gpio_012 gpio
pmux -pin gpio_013:gpio_017 -sel spi_m_ -n 5
# gpio_017~20 NC
pmux -pin gpio_018 -sel i2s_clk0_out
pmux -pin gpio_019 -sel i2s_data0_out
pmux -pin gpio_020 -sel i2s_lr0_out
pmux -pin gpio_021:gpio_026 -sel sd_card0_0_ -pull up -n 6
# gpio_027 NC
pmux -pin gpio_028 -sel sd_card0_0_pres -pull up
pmux -pin gpio_029 -sel sd_card0_0_wprot -pull down # uSD, NO pin for WP
# gpio_030~032 NC
pmux -pin gpio_033,gpio_034 -sel mtsif_ats_ -n 2
pmux -pin gpio_035,gpio_036 -sel sd_card0_0_ -pull up -n 2
# gpio_037 NC
pmux -pin gpio_038 -sel enet0_link
pmux -pin gpio_039 -sel enet0_activity
# gpio_040~041 family common console
# gpio_042~082 NC, gpio

# aon_gpio_00~11 strap, gpio
pmux -pin aon_gpio_12:aon_gpio_15 -sel uart_ -n 4 # UART#1 for BT
# aon_gpio_16~19 NC, gpio
pmux -pin aon_gpio_20 -sel led_out
# aon_gpio_21~27 NC, strap, gpio
pmux -pin aon_sgpio_00:aon_sgpio_03 -sel hdmi_ -n 4 # Tx0 and Rx
# aon_sgpio_04~05 family common BSC for BID

[end]
