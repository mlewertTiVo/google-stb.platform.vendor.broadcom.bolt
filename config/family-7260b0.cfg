# ***************************************************************************
# Broadcom Proprietary and Confidential. (c)2018 Broadcom. All rights reserved.
#
# THIS SOFTWARE MAY ONLY BE USED SUBJECT TO AN EXECUTED SOFTWARE LICENSE
# AGREEMENT  BETWEEN THE USER AND BROADCOM.  YOU HAVE NO RIGHT TO USE OR
# EXPLOIT THIS MATERIAL EXCEPT SUBJECT TO THE TERMS OF SUCH AN AGREEMENT.
#
# ***************************************************************************

[version 1.37]

include config/flashmaps.cfg
include config/stdbuild.cfg
config MEMDMA_MCPB off
config USB_BDC on
config ZEUS4_2 on
config ZEUS4_2_1 on
config ZEUS_VERSION 0x421
config SSBM on

config PM_S3 on
config HARDWARE_SHA off

# ARM TrustZone commands enabled
config TRUSTZONE_CMD on
config TRUSTZONE_MON on

[family 7260b0]

include config/A53.cfg
include config/bsp_config.cfg
gset CONFIG_BRCM_GENET_VERSION 5
include config/layout-zeus421.cfg

gset BCHP_CHIP 7260
gset BCHP_REV b0
gset MEMC_REV B210_G01
gset MEMC_ALT B210_G01_DDR4

# board ID via BSC_M3
i2cbus BSCD

cmdlevel 3

dts config/family-7260b0.dts
include config/A53-peripherals.cfg

# mapping between MEMC & CPU in the ascending order of MEMC and offset in MEMC
mmap 0 0x00000000 0x0000000000 0xC0000000 # [0gb..3gb)@MEMC0 -> [0gb..3gb)
mmap 0 0xC0000000 0x0100000000 0x40000000 # [3gb..4gb)@MEMC0 -> [4gb..5gb)

rtsconfig -id 0 -file config/family-7260a0-box0.rts
rtsdefault -id 1

rtsbase 0 MEMC_ARB_0_CLIENT_INFO_0

# PINMUX for console UART
pmux -pin gpio_040,gpio_041 -sel uart_ -n 2
# board ID at BSC_M3
pmux -pin aon_sgpio_04,aon_sgpio_05 -sel bsc_m3_ -n 2

avs enable -domains 1 -mode dfs -pmap 0 -pstate 0
dt autogen -node avs_cpu

# nand boot shapes
nandshape 0b11000 0b00000
nandshape 0b11000 0b01000
nandshape 0b11000 0b10000

# list of possible nand chips (for all boards)
include config/nandchips.cfg

# flash map selection
mapselect STB_BP3

# Auto generate device nodes in the device tree
include config/A53-stddevices.cfg
dt autogen -node serial -compatible brcm,bcm7260-uart brcm,bcm7271-uart ns16550a -stdout A

sdio -controller 0 -type nodevice
sdio -controller 1 -type nodevice

[chip 7260b0]
avs enable -domains 1 -mode dfs -pmap 0 -pstate 0
# 1GB from two 4Gx8 DRAM parts
ddr -n 0 -size_mb 1024 -base_mb 0 -clk 1067MHz -size_bits 4G -width 8 -phy 16

enet -genet 0 -phy_type INT -mdio_mode 1 -phy_speed 100 -phy_id 1 # built-in

[chip 72603b0]
# 32bit DDR PHY, TSIO, DVB-CI+
avs enable -domains 2 -mode dvfs -pmap 4 -pstate 0

# 1GB from two 4Gx16 DDR4 DRAM parts
memsys alt
ddr -n 0 -size_mb 1024 -base_mb 0 -clk 1200MHz -size_bits 4G -width 16 -phy 32 -custom ddr4

enet -genet 0 -phy_type INT -mdio_mode 1 -phy_speed 100 -phy_id 1 # built-in

[chip 72604b0]
# 4K at p60, and 72603
avs enable -domains 2 -mode dvfs -pmap 6 -pstate 0

# 1GB from two 4Gx16 DDR4 DRAM parts
memsys alt
ddr -n 0 -size_mb 1024 -base_mb 0 -clk 1200MHz -size_bits 4G -width 16 -phy 32 -custom ddr4

enet -genet 0 -phy_type INT -mdio_mode 1 -phy_speed 100 -phy_id 1 # built-in

[chip 72518b0]
# 72604b0 without USB-C and VP9
avs enable -domains 2 -mode dvfs -pmap 6 -pstate 0

# 1GB from two 4Gx16 DDR4 DRAM parts
memsys alt
ddr -n 0 -size_mb 1024 -base_mb 0 -clk 1200MHz -size_bits 4G -width 16 -phy 32 -custom ddr4

enet -genet 0 -phy_type INT -mdio_mode 1 -phy_speed 100 -phy_id 1 # built-in

[board BCM97260SV : chip.7260b0]
comment Silicon Verification
bid 0x10 # BCM97260SV_V00_REV01

memsys alt
ddr -n 0 -size_mb 1024 -base_mb 0 -clk 1200MHz -size_bits 4G -width 8 -phy 16 -custom ddr4

# gpio_000~012 strap, NC
pmux -pin gpio_013:gpio_015 -sel pkt_ -n 3
# gpio_016 NC
pmux -pin gpio_017 -sel pkt_error3
# gpio_018~020 NC
pmux -pin gpio_021:gpio_034 -sel enet0_rgmii_ -n 14
pmux -pin gpio_035:gpio_037 -sel rmx_ -n 3
pmux -pin gpio_038,gpio_039 -sel uart_ -n 2
# gpio_040~041 family common console

# aon_gpio_00~02 TP, strap
pmux -pin aon_gpio_03:aon_gpio_06 -sel led_kd_ -n 4
pmux -pin aon_gpio_07:aon_gpio_11 -sel led_ls_ -n 5
pmux -pin aon_gpio_12,aon_gpio_13 -sel led_ld_ -n 2
pmux -pin aon_gpio_14,aon_gpio_15 -sel pwm -n 2
pmux -pin aon_gpio_16 -sel enet0_link
pmux -pin aon_gpio_17 -sel led_ld_5
pmux -pin aon_gpio_18 -sel enet0_activity
pmux -pin aon_gpio_19 -sel led_ld_7
pmux -pin aon_gpio_20 -sel led_out
pmux -pin aon_sgpio_00,aon_sgpio_01 -sel hdmi_tx0_bsc_ -n 2
# aon_sgpio_02~03 NC
# aon_sgpio_04~05 family common BSC for BID

[board BCM97260USFF_50 : chip.7260b0]
comment USFF from 7250B0
bid 0x30 # re-using BCM97250USFF_V30_REV02

memsys alt
ddr -n 0 -size_mb 1024 -base_mb 0 -clk 1200MHz -size_bits 4G -width 8 -phy 16 -custom ddr4

pcie -controller 0 -type nominal -bus 1 -slot 0 -mac 1
sdio -controller 0 -type sd
sdio -controller 1 -type emmc

# gpio_000~012 strap, NC
pmux -pin gpio_013,gpio_014 -sel uart_ -n 2
# gpio_015~020 NC
pmux -pin gpio_021 -sel sd_card0_0_cmd -pull up
pmux -pin gpio_022 -sel sd_card0_0_clk
pmux -pin gpio_023:gpio_026 -sel sd_card0_0_dat -n 4 -pull up
# gpio_027 gpio
pmux -pin gpio_028 -sel sd_card0_0_pres -pull up
pmux -pin gpio_029 -sel sd_card0_0_wprot -pull down # uSD, no pin for WP
# gpio_030~032 gpio
pmux -pin gpio_033 -sel sd_card0_0_led
# gpio_034 NC
pmux -pin gpio_035 -sel sd_card0_0_pwr0 -pull up
# gpio_036 gpio
pmux -pin gpio_037 -sel sd_card0_0_volt
pmux -pin gpio_038 -sel enet0_link
pmux -pin gpio_039 -sel enet0_activity
# gpio_040~041 family common console

# aon_gpio_00~19 strap, gpio, NC
pmux -pin aon_gpio_20 -sel led_out
pmux -pin aon_sgpio_00,aon_sgpio_01 -sel hdmi_tx0_bsc_ -n 2
pmux -pin aon_sgpio_02,aon_sgpio_03 -sel bsc_m2_ -n 2
# aon_sgpio_04~05 family common BSC for BID

[board BCM97260USFF : chip.7260b0]
comment Ultra Small Form Factor
bid 0x32 # BCM97260USFF_V00

memsys alt
ddr -n 0 -size_mb 2048 -base_mb 0 -clk 1200MHz -size_bits 8G -width 8 -phy 16 -custom ddr4

vreg -name wifi_pwr -gpio upg_gio_aon -pin 15 -active hi # before used by pcie
vreg -name wifi_reg -gpio upg_gio_aon -pin 16 -active hi # before used by pcie
pcie -controller 0 -type nominal -bus 1 -slot 0 -mac 1 -pwr wifi_pwr,wifi_reg
sdio -controller 0 -type sd
sdio -controller 1 -type emmc

# gpio_000~012 strap, NC
pmux -pin gpio_013,gpio_014 -sel uart_ -n 2
# gpio_015~020 NC, gpio
pmux -pin gpio_021 -sel sd_card0_0_cmd -pull up
pmux -pin gpio_022 -sel sd_card0_0_clk
pmux -pin gpio_023:gpio_026 -sel sd_card0_0_dat -n 4 -pull up
# gpio_027 gpio
pmux -pin gpio_028 -sel sd_card0_0_pres -pull up
# gpio_029~032 NC, gpio
pmux -pin gpio_033 -sel sd_card0_0_led
# gpio_034 NC
pmux -pin gpio_035 -sel sd_card0_0_pwr0 -pull up
# gpio_036~037 strap, NC
pmux -pin gpio_038 -sel enet0_link
pmux -pin gpio_039 -sel enet0_activity
# gpio_040~041 family common console

# aon_gpio_00~19 strap, gpio, NC
pmux -pin aon_gpio_20 -sel led_out
# aon_gpio_21~27 NC, strap
pmux -pin aon_sgpio_00,aon_sgpio_01 -sel hdmi_tx0_bsc_ -n 2
# aon_sgpio_02~03 NC
# aon_sgpio_04~05 family common BSC for BID

[board BCM97260CWF : chip.7260b0]
comment Cable and Wi-Fi
bid 0x40 # re-using BCM97250CWF_V10_REV04

sdio -controller 1 -type emmc

# gpio_000~012 strap, NC
pmux -pin gpio_013:gpio_016 -sel spi_m_ -n 4
# gpio_017~020 NC
pmux -pin gpio_021:gpio_024 -sel mtsif0_ -n 4
# gpio_025 TP
pmux -pin gpio_026:gpio_031 -sel mtsif0_ -n 6
# gpio_032 gpio
pmux -pin gpio_033,gpio_034 -sel mtsif_ats_ -n 2
# gpio_035~037 NC, strap
pmux -pin gpio_038,gpio_039 -sel uart_ -n 2
# gpio_040~041 family common console

# aon_gpio_00~01 strap
pmux -pin aon_gpio_02 -sel aud_fs_clk1
# aon_gpio_03 gpio
pmux -pin aon_gpio_04:aon_gpio_06 -sel i2s_ -n 3
# aon_gpio_07~15 strap, gpio, TP
pmux -pin aon_gpio_16 -sel enet0_link
# aon_gpio_17 strap
pmux -pin aon_gpio_18 -sel enet0_activity
# aon_gpio_19 strap
pmux -pin aon_gpio_20 -sel led_out
pmux -pin aon_sgpio_00,aon_sgpio_01 -sel hdmi_tx0_bsc_ -n 2
# aon_sgpio_02~03 NC
# aon_sgpio_04~05 family common BSC for BID

[board BCM972603SV : chip.72603b0]
comment Silicon Verification
include config/7260a0/bcm972604sv-v00.cfg

[board BCM972604SV : chip.72604b0]
comment Silicon Verification
include config/7260a0/bcm972604sv-v00.cfg

[board BCM972518SV : chip.72518b0]
comment Silicon Verification
include config/7260a0/bcm972604sv-v00.cfg

[board BCM972603DV : chip.72603b0]
comment Digital Verification
include config/7260a0/bcm972604dv-v00.cfg

[board BCM972604DV : chip.72604b0]
comment Digital Verification
include config/7260a0/bcm972604dv-v00.cfg

[board BCM972518DV : chip.72518b0]
comment Digital Verification
include config/7260a0/bcm972604dv-v00.cfg

[board BCM972603USFF : chip.72603b0]
comment Ultra Small Form Factor
include config/7260a0/bcm972604usff-v00.cfg

[board BCM972604USFF : chip.72604b0]
comment Ultra Small Form Factor
include config/7260a0/bcm972604usff-v00.cfg

# Set default pmap to 7
avs enable -domains 2 -mode dvfs -pmap 7 -pstate 0

[board BCM972603BUSFF : board.BCM972603USFF]
comment USFF with DDR4-2667
bid 0x32 # BCM972604BUSFF_V00_REV01

# DDR4-2667
memsys alt
ddr -n 0 -size_mb 2048 -base_mb 0 -clk 1333MHz -size_bits 8G -width 16 -phy 32 -custom ddr4

[board BCM972604BUSFF : board.BCM972604USFF]
comment USFF with DDR4-2667
bid 0x32 # BCM972604BUSFF_V00_REV01

# DDR4-2667
memsys alt
ddr -n 0 -size_mb 2048 -base_mb 0 -clk 1333MHz -size_bits 8G -width 16 -phy 32 -custom ddr4

[board BCM972603_4L : chip.72603b0]
comment 4Layer of USFF
include config/7260a0/bcm972604_4l-v00.cfg

[board BCM972604_4L : chip.72604b0]
comment 4Layer of USFF
include config/7260a0/bcm972604_4l-v00.cfg

[board BCM972603DR3_6L : chip.72603b0]
comment DDR3 6Layer of USFF
include config/7255a0/bcm972554dr3_6l-v00.cfg

[board BCM972604DR3_6L : chip.72604b0]
comment DDR3 6Layer of USFF
include config/7255a0/bcm972554dr3_6l-v00.cfg

[board BCM972603C : chip.72603b0]
comment Cable or Satellite
include config/7260a0/bcm972604hb-v00.cfg

[board BCM972603T : board.BCM972603C]
comment Terrestrial
bid 0x61

sdio -controller 1 -type emmc
usb -controller 0 -type nominal -bdc on # enable USB device mode

[board BCM972603BC : board.BCM972603C]
comment Cable/Satellite with DDR4-2667
bid 0x64 # BCM972604BSFF_HB_V00_REV01

# DDR4-2667
memsys alt
ddr -n 0 -size_mb 2048 -base_mb 0 -clk 1333MHz -size_bits 8G -width 16 -phy 32 -custom ddr4

[board BCM972603BT : board.BCM972603BC]
comment Terrestrial with DDR4-2667
bid 0x65

sdio -controller 1 -type emmc
usb -controller 0 -type nominal -bdc on # enable USB device mode

[board BCM972604C : chip.72604b0]
comment Cable or Satellite
include config/7260a0/bcm972604hb-v00.cfg

[board BCM972604T : board.BCM972604C]
comment Terrestrial
bid 0x61

sdio -controller 1 -type emmc
usb -controller 0 -type nominal -bdc on # enable USB device mode

[board BCM972604BC : board.BCM972604C]
comment Cable/Satellite with DDR4-2667
bid 0x64 # BCM972604BSFF_HB_V00_REV01

# DDR4-2667
memsys alt
ddr -n 0 -size_mb 2048 -base_mb 0 -clk 1333MHz -size_bits 8G -width 16 -phy 32 -custom ddr4

[board BCM972604BT : board.BCM972604BC]
comment Terrestrial with DDR4-2667
bid 0x65

sdio -controller 1 -type emmc
usb -controller 0 -type nominal -bdc on # enable USB device mode

[end]
